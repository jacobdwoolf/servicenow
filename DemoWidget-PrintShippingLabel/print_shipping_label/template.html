<!-- 
    note usage of the 'no-print' class here, which has been included in the CSS under a media query for type 'print'
    when media = print, any elements with the no-print class will be hidden from the page, to avoid being included in the printed file

    also note, in this case, the value of "page_header" is accessed directly from the options object, which is available on the template
    if you wanted to adjust/manipulate this value, or use other details generated by the script, you can either override options.variable_name, or parse it into its own property on the data object
-->
<div class="page-header no-print">
    {{options.page_header}}
</div>

<!--
    Main container for the label, which will repeat for each record retrieved by the server script.
    Also includes an example usage of ng-style, in this case used to apply styles based on values generated by the server or client script.
        Important note: because ng-style applies styling inline, it will override any styling applied by the CSS.

    Embedded in this div you'll see the "panel" class (and related classes), which is a default bootstrap class available on the Portal, and is usually a good starting point for basic styling of a container.
-->
<div class="print-label" ng-repeat="record in data.recordData" ng-style="{'padding': options.page_margin}">
    <div class="panel panel-default">
        <div class="panel-heading">{{record.number}} - {{record.shortDesc}}</div>
        <div class="panel-body record-details">
            <div class="detail-row">
                <span>Number:</span>
                <span>{{record.number}}</span>
            </div>
            <div class="detail-row">
                <span>Short Description:</span>
                <span>{{record.shortDesc}}</span>
            </div>
            <div class="detail-row">
                <span>Requested for:</span>
                <!-- 
                    ng-class is used here to selectively apply the "vip" class to this element, if the record is marked as such 
                    there's a few syntaxes this attribute will accept, in this case, it's in the format
                    {'[className]': [conditional statement]} - the class 'vip' will be applied if 'record.reqFor.vip' evaluates to true
                -->
                <span ng-class="{'vip': record.reqFor.vip}">{{record.reqFor.name}}</span>
            </div>
            <!--
                ng-if used here, to conditionally show this element (and all contained elements) only when a value exists
                this attribute accepts a JavaScript statement as its condition, which should evaluate to 'true' or 'false'
                in this case, if(conditionStatement) will give a truthy value if the variable exists
            -->
            <div class="detail-row" ng-if="record.reqFor.email">
                <span>Email:</span>
                <span>{{record.reqFor.email}}</span>
            </div>
            <div class="detail-row" ng-if="record.reqFor.phone">
                <span>Phone:</span
                       <span>{{record.reqFor.phone}}</span>
            </div>
            <!-- 
                slightly different ng-if, which checks a property of the value, in this case the length of the expected array, rather than simply checking if the value is defined 
            -->
            <div class="detail-row" ng-if="record.watchlist.length > 0">
                <span>Watch list:</span>
                <div class="watch-list">
                    <!-- 
                        nested ng-repeat statement here will repeat for the members of the 'watchlist' object, which is a nested array-type property of the 'record' object
                    -->
                    <div ng-repeat="user in record.watchlist">
                        <div class="detail-row">
                            <span>Name:</span>
                            <span>{{user.name}}</span>
                        </div>
                        <div class="detail-row" ng-if="user.email">
                            <span>Email:</span>
                            <span>{{user.email}}</span>
                        </div>
                        <div class="detail-row" ng-if="user.phone">
                            <span>Phone:</span>
                            <span>{{user.phone}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--
    secondary panel element to inform the user when no records are returned, rather than displaying an empty page
    only displays if data.recordData is false or undefined - this also enables easy graceful error handling in the server script
    uses an alternate version of the panel class, 'panel-warning', which adjusts the colors based on the Portal theme
    other panels include 'panel-info', 'panel-danger', 'panel-success', 'panel-primary'
-->
<div class="no-records panel panel-warning" ng-if="!data.recordData">
    <div class="panel-heading">
        No records matched the given parameters.
    </div>
</div>